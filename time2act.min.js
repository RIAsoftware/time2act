
(function(){if($("#time2act").length===0){return}$("#time2act").html('<div class="time2act-button">\n</div>\n<div class="time2act-panel">\n    <div class="time2act-panel_container">\n        <div class="time2act-panel_content"></div>\n        <div class="time2act-close"></div>\n    </div>\n</div>');var f=$(".time2act-button");var b=$(".time2act-panel");var a="";var g="";var k=false;var h=false;var i=d("time2act");var n=i+"data/db.json";$.ajax({cache:false,url:n,dataType:"json",success:function(o){f.css(o.settings.button.css);$(".time2act-panel_container").css(o.settings.container.css);$("body").append("<style>.time2act-close::before, .time2act-close::after, .time2act-close:hover::before, .time2act-close:hover::after {background-color: "+o.settings.container.close.color+";}</style>");b.addClass("time2act-panel_from_"+o.settings.container.position);j(o.settings.container.position,b);f.on("click",function(p){p.preventDefault();m();if(b.hasClass("time2act-panel-show")){b.removeClass("time2act-panel-show")}else{b.addClass("time2act-panel-show")}});b.on("click",function(p){if($(p.target).hasClass("time2act-close")||$(p.target).hasClass("time2act-panel")){p.preventDefault();b.removeClass("time2act-panel-show")}});b.css("display","initial");e(o)}});function e(q){var p=new Date();var o=$.grep(q.contents,function(w,s){var v=w.start.split(":");var t=w.end.split(":");var r=new Date(p.getFullYear(),p.getMonth(),p.getDate(),parseInt(v[0]),parseInt(v[1]));var u=new Date(p.getFullYear(),p.getMonth(),p.getDate(),parseInt(t[0]),parseInt(t[1]));if(r>u){if(p.getHours()>=r.getHours()){u.setDate(u.getDate()+1)}else{r.setDate(r.getDate()-1)}}return w.active===1&&p>=r&&p<u});k=false;h=false;$(o).each(function(r,s){k=true;h=true;setTimeout(function(){c(s,q.settings.button.animation,q.settings.container.animation)},r*q.settings.content_change_interval*1000)});if(!k&&a!==""){f.fadeOut(function(){$(this).empty()});k=false}if(!h&&g!==""){if(b.hasClass("time2act-panel-show")){b.removeClass("time2act-panel-show");$(this).empty()}else{$(".time2act-panel_content").fadeOut(function(){$(this).empty()})}h=false}setTimeout(function(){e(q)},o.length*q.settings.content_change_interval*1000)}function c(q,o,p){if(a!==q.button_template){a=q.button_template;switch(o){case"none":f.hide().html(a).show();break;case"fade":f.fadeOut(function(){$(this).html(a).fadeIn()});break;case"slide":f.slideUp(function(){$(this).html(a).slideDown()});break;default:break}}if(g!==q.template){g=q.template;switch(p){case"none":$(".time2act-panel_content").hide().html(g);m();$(".time2act-panel_content").show();break;case"fade":$(".time2act-panel_content").fadeOut(function(){$(this).html(g);m();$(this).fadeIn()});break;case"slide":$(".time2act-panel_content").slideUp(function(){$(this).html(g);m();$(this).slideDown()});break;default:break}}}function m(){$(".time2act-panel_content").css("display","inline-block");if($(".time2act-panel_content").width()>$(window).width()||$(".time2act-panel_content").height()>$(window).height()){$(".time2act-panel_content").css("display","block")}else{var p=($(".time2act-panel_container").width()/2)-($(".time2act-panel_content").width()/2);var o=($(".time2act-panel_container").height()/2)-($(".time2act-panel_content").height()/2);if(p<0){p=0}if(o<0){o=0}$(".time2act-panel_content").css({left:p,top:o})}}function j(o,q){var p=parseInt($(window).width())-parseInt(q.position().left);var r=parseInt($(window).height())-parseInt(q.position().top);switch(o){case"right":$(".time2act-panel_from_right .time2act-panel_container").css({"-webkit-transform":"translate3d("+p+"px, 0, 0)",transform:"translate3d("+p+"px, 0, 0)"});break;case"left":$(".time2act-panel_from_left .time2act-panel_container").css({"-webkit-transform":"translate3d(-"+p+"px, 0, 0)",transform:"translate3d(-"+p+"px, 0, 0)"});break;case"bottom":$(".time2act-panel_from_bottom .time2act-panel_container").css({"-webkit-transform":"translate3d(0, "+r+"px, 0)",transform:"translate3d(0, "+r+"px, 0)"});break;case"top":$(".time2act-panel_from_top .time2act-panel_container").css({"-webkit-transform":"translate3d(0, -"+r+"px, 0)",transform:"translate3d(0, -"+r+"px, 0)"});break;case"center":$(".time2act-panel_from_center .time2act-panel_container").css({"-webkit-transform":"scale3d(0, 0, 0)",transform:"scale3d(0, 0, 0)"});break;default:break}}function l(p){var o=new XMLHttpRequest();o.open("HEAD",p,false);o.send();return o.status!==404}function d(p){var o=document.getElementsByTagName("script");if(o&&o.length>0){for(var q in o){if(o[q].src&&o[q].src.match(new RegExp(p+"\\.js$"))){return o[q].src.replace(new RegExp("(.*)"+p+"\\.js$"),"$1")}}}}})();